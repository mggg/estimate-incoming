{"version":3,"sources":["loading.gif","fileinput.js","Estimator.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","d3","require","FileInput","props","document","body","ondragover","ev","preventDefault","stopPropagation","ondrop","handleDrop","bind","this","startLoading","dataTransfer","items","length","parseFile","getAsFile","files","e","target","file","reader","FileReader","onload","tblob","result","rows","csvParseRows","toLowerCase","trim","splice","onChange","readAsText","type","handleUpload","React","Component","DownloadButton","className","onClick","window","location","href","RefreshButton","reload","postalCodeToName","al","ak","az","ar","ca","co","ct","de","fl","ga","hi","id","il","in","ia","ks","ky","la","me","mh","md","ma","mi","mn","ms","mo","mt","ne","nv","nh","nj","nm","ny","nc","nd","oh","ok","or","pa","pr","ri","sc","sd","tn","tx","ut","vt","va","wa","dc","wv","wi","wy","df","parsedDate","date","dd","String","getDate","padStart","mm","getMonth","getFullYear","Estimator","state","uniStats","loading","sortMode","uploadError","csv","then","forEach","r","location_name","replace","DataFrame","fetch","res","text","data","fileUploaded","setState","isNaN","states","map","txt","days","i","Date","setDate","dateString","push","totalPop","totalPositives","ourState","filter","popState","stat","mean","union","currentPositives","sum","probPositive","allStudents","estStudents","matchedStates","lines","sort","a","b","key","toFixed","toLocaleString","colSpan","Math","round","style","textAlign","padding","border","src","LoadingGif","alt","approxPositiveStudents","App","Boolean","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.684c58cf.chunk.js","sourcesContent":["module.exports = \"data:image/gif;base64,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\"","import React from 'react';\r\n\r\nconst d3 = require(\"d3\");\r\n\r\nexport default class FileInput extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    document.body.ondragover = (ev) => {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n    };\r\n    document.body.ondrop = this.handleDrop.bind(this);\r\n  }\r\n\r\n  handleDrop(ev) {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.props.startLoading();\r\n\r\n    if (ev.dataTransfer.items && ev.dataTransfer.items.length) {\r\n      this.parseFile(ev.dataTransfer.items[0].getAsFile());\r\n    } else if (ev.dataTransfer.files && ev.dataTransfer.files.length) {\r\n      this.parseFile(ev.dataTransfer.files[0].getAsFile());\r\n    }\r\n  }\r\n\r\n  handleUpload(e) {\r\n    this.props.startLoading();\r\n    this.parseFile(e.target.files[0]);\r\n  }\r\n\r\n  parseFile(file) {\r\n    let reader = new FileReader();\r\n    reader.onload = (e) => {\r\n        let tblob = e.target.result,\r\n            rows = d3.csvParseRows(tblob);\r\n        // trim header\r\n        if (rows[0][0].toLowerCase().trim() === 'state' && rows[0][1].toLowerCase().trim() === 'students') {\r\n          rows.splice(0, 1);\r\n        }\r\n        this.props.onChange(rows);\r\n    };\r\n    reader.readAsText(file);\r\n  }\r\n\r\n  render() {\r\n    return <div>\r\n      <input\r\n        type=\"file\"\r\n        onChange={this.handleUpload.bind(this)}\r\n      />\r\n    </div>\r\n  }\r\n}\r\n","import React from 'react';\r\nimport DataFrame from \"dataframe-js\";\r\n\r\nimport FileInput from './fileinput';\r\nimport LoadingGif from './loading.gif';\r\n// import unzipper from './unzipper';\r\n// import http from 'http';\r\n\r\nconst DownloadButton = props => {\r\n  const downloadFile = () => {\r\n    window.location.href = \"/estimate-incoming/template.csv\"\r\n  }\r\n  return (\r\n            <button className=\"btn btn-info\" onClick={downloadFile}>\r\n              Download Template\r\n            </button>\r\n  )\r\n}\r\n\r\nconst RefreshButton = props => {\r\n  return (\r\n    <button className='btn btn-info'\r\n            onClick={() => window.location.reload()}>\r\n      Start Over\r\n    </button>\r\n  )\r\n}\r\n\r\nconst d3 = require(\"d3\");\r\nconst postalCodeToName = {\r\n  al: \"Alabama\",\r\n  ak: \"Alaska\",\r\n  az: \"Arizona\",\r\n  ar: \"Arkansas\",\r\n  ca: \"California\",\r\n  co: \"Colorado\",\r\n  ct: \"Connecticut\",\r\n  de: \"Delaware\",\r\n  fl: \"Florida\",\r\n  ga: \"Georgia\",\r\n  hi: \"Hawaii\",\r\n  id: \"Idaho\",\r\n  il: \"Illinois\",\r\n  in: \"Indiana\",\r\n  ia: \"Iowa\",\r\n  ks: \"Kansas\",\r\n  ky: \"Kentucky\",\r\n  la: \"Louisiana\",\r\n  me: \"Maine\",\r\n  mh: \"Marshall Islands\",\r\n  md: \"Maryland\",\r\n  ma: \"Massachusetts\",\r\n  mi: \"Michigan\",\r\n  mn: \"Minnesota\",\r\n  ms: \"Mississippi\",\r\n  mo: \"Missouri\",\r\n  mt: \"Montana\",\r\n  ne: \"Nebraska\",\r\n  nv: \"Nevada\",\r\n  nh: \"New Hampshire\",\r\n  nj: \"New Jersey\",\r\n  nm: \"New Mexico\",\r\n  ny: \"New York\",\r\n  nc: \"North Carolina\",\r\n  nd: \"North Dakota\",\r\n  oh: \"Ohio\",\r\n  ok: \"Oklahoma\",\r\n  or: \"Oregon\",\r\n  pa: \"Pennsylvania\",\r\n  pr: \"Puerto Rico\",\r\n  ri: \"Rhode Island\",\r\n  sc: \"South Carolina\",\r\n  sd: \"South Dakota\",\r\n  tn: \"Tennessee\",\r\n  tx: \"Texas\",\r\n  ut: \"Utah\",\r\n  vt: \"Vermont\",\r\n  va: \"Virginia\",\r\n  wa: \"Washington\",\r\n  dc: \"District of Columbia\",\r\n  wv: \"West Virginia\",\r\n  wi: \"Wisconsin\",\r\n  wy: \"Wyoming\"\r\n};\r\n\r\nlet df = null;\r\n\r\nfunction lowerState(txt) {\r\n  txt = txt.trim();\r\n  if (txt.length === 2) {\r\n      txt = postalCodeToName[txt.toLowerCase()]\r\n  }\r\n  return txt.toLowerCase();\r\n}\r\n\r\nfunction parsedDate(date) {\r\n  let dd = String(date.getDate()).padStart(2, '0'),\r\n      mm = String(date.getMonth() + 1).padStart(2, '0'),\r\n      yyyy = date.getFullYear(),\r\n      str = yyyy + '-' + mm + '-' + dd;\r\n  return str;\r\n};\r\n\r\nexport default class Estimator extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      uniStats: [],\r\n      loading: true,\r\n      sortMode: 0,\r\n      uploadError: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    d3.csv('/estimate-incoming/infections_data.csv').then(rows => {\r\n      // console.log(rows);\r\n      rows.forEach(r => r.location_name = r.location_name.toLowerCase().replace(\"georgia_two\", \"georgia\"))\r\n      df = new DataFrame(rows, [\r\n        \"date_reported\",\"location_name\",\"location_population\",\"mean_admis\",\"mean_deaths\",\r\n        \"mean_infections\",\"upper_admis\",\"upper_deaths\",\"upper_infections\",\"lower_admis\",\r\n        \"lower_deaths\",\"lower_infections\",\"cum_deaths\",\"seroprevalence_mean\",\r\n        \"seroprevalence_upper\",\"seroprevalence_lower\",\"admis_mean_per_cap\",\"admis_upper_per_cap\",\r\n        \"admis_lower_per_cap\",\"deaths_mean_per_cap\",\"deaths_upper_per_cap\",\"deaths_lower_per_cap\"]);\r\n      // infections_data.show(3);\r\n\r\n      fetch(\"/estimate-incoming/students.csv\").then(res => res.text()).then(data => {\r\n        let rows = d3.csvParseRows(data);\r\n        rows.splice(0, 1);\r\n        this.fileUploaded(rows);\r\n      });\r\n    });\r\n  }\r\n\r\n  startLoading() {\r\n    this.setState({ loading: true })\r\n  }\r\n\r\n  fileUploaded(rows) {\n    if (isNaN(rows[0][1] * 1) || rows[0].length !== 2) {\r\n      this.setState({\r\n        uploadError: true,\r\n      })\n      return;\r\n    }\r\n    let states = rows.map((r) => [lowerState(r[0]), 1 * r[1]]),\r\n        days = [];\r\n    for (var i = 3; i<22; i++) {\r\n      var date = new Date();\r\n      date.setDate(date.getDate() - i);\r\n      let dateString = parsedDate(date);\r\n      days.push(dateString);\r\n    }\r\n\r\n    // input: [ [name, students] ]\r\n\r\n    let totalPop = 0;\r\n    let totalPositives = 0;\r\n\r\n    states.forEach(state => {\r\n      if (state[0] === 'international') {\r\n        return\r\n      } else {\r\n        let ourState = df.filter({'location_name':state[0]});\r\n        let popState = ourState.stat.mean('location_population');\r\n        totalPop += popState;\r\n        let data = ourState.filter({'date_reported':days[0]});\r\n        for (var i = 1; i < days.length; i++) {\r\n          data = data.union(ourState.filter({'date_reported':days[i]}))\r\n        }\r\n        let pastInfections = data;\r\n        let currentPositives = pastInfections.stat.sum('mean_infections');\r\n        totalPositives += currentPositives;\r\n        let probPositive = currentPositives / popState;\r\n        state.push(probPositive);\r\n      }\r\n    });\r\n\r\n    states.forEach(state => {\r\n      if (state[0] === 'international') {\r\n        state.push(totalPositives/totalPop);\r\n      }\r\n    })\r\n\r\n    // output: [[ name, students, fraction_prob_positive ]]\r\n\r\n    this.setState({\r\n      uniStats: states,\n      uploadError: false,\r\n      loading: false\r\n    })\r\n  }\r\n\r\n  sort(sortMode) {\r\n    this.setState({ sortMode: sortMode })\r\n  }\r\n\r\n  approxPositiveStudents() {\r\n    let states = this.state.uniStats,\r\n        sum = 0,\r\n        allStudents = 0,\r\n        estStudents = 0,\r\n        matchedStates = 0,\r\n        lines = [];\r\n\r\n    // default sort is A-Z\r\n    if (this.state.sortMode === 1) {\r\n      // sort by positivity\r\n      states = states.sort((a, b) => b[2] - a[2])\r\n    } else if (this.state.sortMode === 2) {\r\n      states = states.sort((a, b) => b[2] * b[1] - a[2] * a[1])\r\n    } else if (this.state.sortMode === 0) {\r\n      states = states.sort()\r\n    }\r\n\r\n    states.forEach((state, i) => {\r\n      lines.push(<tr key={i}>\r\n        <td>{state[0]}</td>\r\n        <td>{(state[2]*100).toFixed(2)}%</td>\r\n        <td>{state[1].toLocaleString()}</td>\r\n        <td>{(state[1] * state[2]).toFixed(2)}</td>\r\n      </tr>)\r\n      allStudents += state[1] * 1;\r\n      if (!isNaN(state[2])) {\r\n        estStudents += state[1] * 1;\r\n        sum += state[1] * state[2];\r\n        matchedStates++;\r\n      }\r\n    })\r\n\r\n    if (allStudents) {\r\n      lines.push(<tr key=\"total\" id=\"total\">\r\n        <td colSpan=\"2\">\r\n          <strong>Total</strong>\r\n          <br/>\r\n          File included {matchedStates}/53 regions\r\n        </td>\r\n        <td>\r\n          <strong>{estStudents.toLocaleString()}</strong> <br/>\r\n          Matched {Math.round(estStudents/allStudents*100)}% of students\r\n        </td>\r\n        <td><strong>{sum.toFixed(2)}</strong><br/>Estimated COVID-positive</td>\r\n      </tr>)\r\n    }\r\n\r\n    return lines;\r\n  }\r\n\r\n  render() {\r\n    return <div className=\"container\">\r\n      <div className=\"col-sm-12\">\r\n        <div style={{textAlign:\"center\"}}>\r\n          <nav className=\"navbar navbar-dark bg-primary\">\r\n            <h2>Estimate Incoming Cases</h2>\r\n          </nav>\r\n          <section className=\"qSection\">\r\n            <p style={{textAlign: 'left', padding: '10px'}}>\r\n              <strong>This is a calculator to help university leadership estimate how many students will immediately test positive for COVID-19 as they arrive on campus in the Fall of 2020.</strong> We use data from Dr. Abraham Flaxman and the <a href=\"http://www.healthdata.org/covid/data-downloads\" target=\"_blank\">IHME</a> that estimates the number of daily infections in each state, along with university-specific data on where students are coming from. Our intention is to help universities understand how many isolation rooms are necessary at the start of the semester. This calculator is a project of the MGGG Redistricting Lab\r\n              (<a href=\"https://mggg.org\" target=\"_blank\">mggg.org</a>)\r\n              at Tisch College of Tufts University.  For information, contact&nbsp;\r\n              <a href=\"mailto:Moon.Duchin@tufts.edu\">Moon.Duchin@tufts.edu</a>.\r\n            </p>\r\n            <p style={{textAlign: 'left', padding: '10px'}}>\r\n              <strong>How to use this calculator:</strong>&nbsp;\r\n              Upload a CSV file (formatted as below) that contains the number of students from each state, and the calculator will handle the rest.\r\n            </p>\r\n          </section>\r\n        </div>\r\n\r\n        <hr id=\"separator\"/>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-sm-6\">\r\n            <h3>Create CSV</h3>\r\n            <DownloadButton /><br/>\r\n            It should have this format:<br/>\r\n              <code>\r\n              state,students<br/>\r\n              international,20<br/>\r\n              AK,2<br/>\r\n              AL,4<br/>\r\n              ...\r\n              </code>\r\n          </div>\r\n          <div className=\"col-sm-6\">\r\n            <h3>Process File</h3>\r\n            After editing the template, upload or drag and drop it onto this page.<br/>\r\n            It is read locally and not uploaded.<br/>\r\n            <div className=\"col-sm-6 offset-3\" style={{border:\"1px solid #ccc\", padding: 6}}>\r\n              <FileInput\r\n                onChange={this.fileUploaded.bind(this)}\r\n                startLoading={this.startLoading.bind(this)}\r\n                />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <hr/>\r\n        <div className=\"col-sm-12\">\r\n          {this.state.uploadError\r\n          ? <div>\r\n              <p>Your file was formatted incorrectly.</p>\r\n              <RefreshButton />\r\n            </div>\r\n          : this.state.loading\r\n            ? <img src={LoadingGif} alt=\"Loading spinner\"/>\r\n            : <div>\r\n              <button className=\"btn btn-info\" onClick={e => this.sort(0)}>Sort A->Z</button>\r\n              <button className=\"btn btn-info\" onClick={e => this.sort(1)}>Sort by State %</button>\r\n              <button className=\"btn btn-info\" onClick={e => this.sort(2)}>Sort by Positives</button>\r\n            </div>}\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-sm-12\">\r\n            {this.state.uploadError\r\n            ? <p/>\r\n            : this.state.loading\r\n              ? <p/>\r\n              : <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>State</th>\r\n                      <th>Estimated Positive Rate</th>\r\n                      <th>Arriving Students</th>\r\n                      <th>Estimated Positives</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {this.approxPositiveStudents()}\r\n                  </tbody>\r\n                </table>\r\n              }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n","import React from 'react';\nimport Estimator from './Estimator';\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Estimator/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}