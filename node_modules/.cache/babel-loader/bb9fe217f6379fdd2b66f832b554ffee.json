{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/gabe/mggg/estimate-incoming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.from\");\n\nrequire(\"core-js/modules/es.array.includes\");\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.array.reduce\");\n\nrequire(\"core-js/modules/es.object.entries\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.includes\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.groupBy = groupBy;\nexports.GroupedDataFrame = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _symbol = require(\"./symbol\");\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar GroupedDataFrame = function () {\n  function GroupedDataFrame(df, columnNames, groups, hashes) {\n    _classCallCheck(this, GroupedDataFrame);\n\n    this[_symbol.__groups__] = groups;\n    this[_symbol.__hashes__] = hashes;\n    this.df = df;\n    this.on = columnNames.length > 0 ? columnNames : df.listColumns();\n  }\n\n  _createClass(GroupedDataFrame, [{\n    key: Symbol.iterator,\n    value: _regeneratorRuntime.mark(function value() {\n      var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, hash;\n\n      return _regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context.prev = 3;\n              _iterator = this[_symbol.__hashes__][Symbol.iterator]();\n\n            case 5:\n              if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                _context.next = 12;\n                break;\n              }\n\n              hash = _step.value;\n              _context.next = 9;\n              return this[_symbol.__groups__][hash];\n\n            case 9:\n              _iteratorNormalCompletion = true;\n              _context.next = 5;\n              break;\n\n            case 12:\n              _context.next = 18;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](3);\n              _didIteratorError = true;\n              _iteratorError = _context.t0;\n\n            case 18:\n              _context.prev = 18;\n              _context.prev = 19;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 21:\n              _context.prev = 21;\n\n              if (!_didIteratorError) {\n                _context.next = 24;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 24:\n              return _context.finish(21);\n\n            case 25:\n              return _context.finish(18);\n\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this, [[3, 14, 18, 26], [19,, 21, 25]]);\n    })\n  }, {\n    key: \"get\",\n    value: function get(hash) {\n      return this[_symbol.__groups__][hash];\n    }\n  }, {\n    key: \"toCollection\",\n    value: function toCollection() {\n      return _toConsumableArray(this);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var quiet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return _toConsumableArray(this).map(function (_ref) {\n        var group = _ref.group,\n            groupKey = _ref.groupKey;\n        var groupLog = \"--\\n[\".concat(JSON.stringify(groupKey), \"]\\n--\");\n\n        if (!quiet) {\n          console.log(groupLog);\n        }\n\n        return groupLog + \"\\n\" + group.show(10, quiet);\n      }).reduce(function (p, n) {\n        return p + \"\\n\" + n;\n      });\n    }\n  }, {\n    key: \"listGroups\",\n    value: function listGroups() {\n      return _toConsumableArray(this).map(function (_ref2) {\n        var groupKey = _ref2.groupKey;\n        return groupKey;\n      });\n    }\n  }, {\n    key: \"listHashs\",\n    value: function listHashs() {\n      return this[_symbol.__hashes__];\n    }\n  }, {\n    key: \"map\",\n    value: function map(func) {\n      var _ref4;\n\n      var mapped = _toConsumableArray(this).map(function (_ref3) {\n        var group = _ref3.group;\n        return group.map(func);\n      });\n\n      return this.df.__newInstance__((_ref4 = []).concat.apply(_ref4, _toConsumableArray(mapped.map(function (group) {\n        return group.toCollection();\n      }))), mapped[0].listColumns());\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(condition) {\n      var _ref6;\n\n      var mapped = _toConsumableArray(this).map(function (_ref5) {\n        var group = _ref5.group;\n        return group.filter(condition);\n      }).filter(function (group) {\n        return group.listColumns().length > 0;\n      });\n\n      return mapped.length === 0 ? this.df.__newInstance__([], this.df.listColumns()) : this.df.__newInstance__((_ref6 = []).concat.apply(_ref6, _toConsumableArray(mapped.map(function (group) {\n        return group.toCollection();\n      }))), this.df.listColumns());\n    }\n  }, {\n    key: \"chain\",\n    value: function chain() {\n      var _ref8;\n\n      for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n        funcs[_key] = arguments[_key];\n      }\n\n      var mapped = _toConsumableArray(this).map(function (_ref7) {\n        var group = _ref7.group;\n        return group.chain.apply(group, funcs);\n      });\n\n      return this.df.__newInstance__((_ref8 = []).concat.apply(_ref8, _toConsumableArray(mapped.map(function (group) {\n        return group.toCollection();\n      }))), mapped[0].listColumns());\n    }\n  }, {\n    key: \"aggregate\",\n    value: function aggregate(func) {\n      var columnName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"aggregation\";\n      return this.df.__newInstance__(_toConsumableArray(this).map(function (_ref9) {\n        var group = _ref9.group,\n            groupKey = _ref9.groupKey;\n        return _objectSpread({}, groupKey, _defineProperty({}, columnName, func(group, groupKey)));\n      }), [].concat(_toConsumableArray(this.on), [columnName]));\n    }\n  }, {\n    key: \"pivot\",\n    value: function pivot(columnToPivot) {\n      var func = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (gdf) {\n        return gdf.count();\n      };\n      var columns = [].concat(_toConsumableArray(this.on), _toConsumableArray(this.df.distinct(columnToPivot).toArray(columnToPivot)));\n      return this.df.__newInstance__(this.aggregate(function (group) {\n        return group.groupBy(columnToPivot).aggregate(function (gp, gk) {\n          return _defineProperty({}, gk[columnToPivot], func(gp, gk));\n        }).toArray(\"aggregation\").reduce(function (p, n) {\n          return _objectSpread({}, p, {}, n);\n        }, {});\n      }).toCollection().map(function (_ref11) {\n        var aggregation = _ref11.aggregation,\n            rest = _objectWithoutProperties(_ref11, [\"aggregation\"]);\n\n        return _objectSpread({}, rest, {}, aggregation);\n      }), columns);\n    }\n  }, {\n    key: \"melt\",\n    value: function melt() {\n      var _this = this;\n\n      var variableColumnName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"variable\";\n      var valueColumnName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"value\";\n      var columns = [].concat(_toConsumableArray(this.on), [variableColumnName, valueColumnName]);\n      return this.df.__newInstance__(this.aggregate(function (group) {\n        return Object.entries(group.toDict()).reduce(function (tidy, _ref12) {\n          var _ref13 = _slicedToArray(_ref12, 2),\n              key = _ref13[0],\n              value = _ref13[1];\n\n          return [].concat(_toConsumableArray(tidy), _toConsumableArray(value.reduce(function (p, n) {\n            var _ref14;\n\n            return !_this.on.includes(key) ? [].concat(_toConsumableArray(p), [(_ref14 = {}, _defineProperty(_ref14, variableColumnName, key), _defineProperty(_ref14, valueColumnName, n), _ref14)]) : p;\n          }, [])));\n        }, []);\n      }).toCollection().reduce(function (p, _ref15) {\n        var aggregation = _ref15.aggregation,\n            rest = _objectWithoutProperties(_ref15, [\"aggregation\"]);\n\n        return [].concat(_toConsumableArray(p), _toConsumableArray(aggregation.map(function (x) {\n          return _objectSpread({}, rest, {}, x);\n        })));\n      }, []), columns);\n    }\n  }]);\n\n  return GroupedDataFrame;\n}();\n\nexports.GroupedDataFrame = GroupedDataFrame;\n\nfunction groupBy(df, columnNames) {\n  var rowsByGroup = {};\n  var hashes = [];\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = df.toCollection(true)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var row = _step2.value;\n      var hash = row.select.apply(row, _toConsumableArray(columnNames)).hash();\n\n      if (!rowsByGroup[hash]) {\n        hashes.push(hash);\n        rowsByGroup[hash] = [];\n      }\n\n      rowsByGroup[hash].push(row);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var groups = hashes.reduce(function (groups, hash) {\n    var _rowsByGroup$hash$;\n\n    groups[hash] = {\n      groupKey: (_rowsByGroup$hash$ = rowsByGroup[hash][0]).select.apply(_rowsByGroup$hash$, _toConsumableArray(columnNames)).toDict(),\n      hash: hash,\n      group: new df.constructor(rowsByGroup[hash], df.listColumns())\n    };\n    return groups;\n  }, {});\n  return new GroupedDataFrame(df, columnNames, groups, hashes);\n}","map":{"version":3,"sources":["/Users/gabe/mggg/estimate-incoming/node_modules/dataframe-js/lib/group.js"],"names":["require","Object","defineProperty","exports","value","groupBy","GroupedDataFrame","_symbol","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","getOwnPropertySymbols","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","configurable","writable","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","toString","from","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","df","columnNames","groups","hashes","__groups__","__hashes__","on","listColumns","mark","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","hash","wrap","value$","_context","prev","t0","return","finish","stop","get","toCollection","show","quiet","map","_ref","group","groupKey","groupLog","concat","JSON","stringify","console","log","reduce","p","n","listGroups","_ref2","listHashs","func","_ref4","mapped","_ref3","__newInstance__","condition","_ref6","_ref5","chain","_ref8","_len","funcs","_key","_ref7","aggregate","columnName","_ref9","pivot","columnToPivot","gdf","count","columns","distinct","toArray","gp","gk","_ref11","aggregation","rest","melt","_this","variableColumnName","valueColumnName","entries","toDict","tidy","_ref12","_ref13","_ref14","includes","_ref15","x","rowsByGroup","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","row","select","_rowsByGroup$hash$","constructor"],"mappings":"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","sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.symbol.description\");\n\nrequire(\"core-js/modules/es.symbol.iterator\");\n\nrequire(\"core-js/modules/es.array.concat\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.from\");\n\nrequire(\"core-js/modules/es.array.includes\");\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nrequire(\"core-js/modules/es.array.iterator\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.array.reduce\");\n\nrequire(\"core-js/modules/es.date.to-string\");\n\nrequire(\"core-js/modules/es.object.entries\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/es.object.to-string\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.includes\");\n\nrequire(\"core-js/modules/es.string.iterator\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.groupBy = groupBy;\nexports.GroupedDataFrame = void 0;\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _symbol = require(\"./symbol\");\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar GroupedDataFrame = function () {\n  function GroupedDataFrame(df, columnNames, groups, hashes) {\n    _classCallCheck(this, GroupedDataFrame);\n\n    this[_symbol.__groups__] = groups;\n    this[_symbol.__hashes__] = hashes;\n    this.df = df;\n    this.on = columnNames.length > 0 ? columnNames : df.listColumns();\n  }\n\n  _createClass(GroupedDataFrame, [{\n    key: Symbol.iterator,\n    value: regeneratorRuntime.mark(function value() {\n      var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, hash;\n\n      return regeneratorRuntime.wrap(function value$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context.prev = 3;\n              _iterator = this[_symbol.__hashes__][Symbol.iterator]();\n\n            case 5:\n              if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                _context.next = 12;\n                break;\n              }\n\n              hash = _step.value;\n              _context.next = 9;\n              return this[_symbol.__groups__][hash];\n\n            case 9:\n              _iteratorNormalCompletion = true;\n              _context.next = 5;\n              break;\n\n            case 12:\n              _context.next = 18;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](3);\n              _didIteratorError = true;\n              _iteratorError = _context.t0;\n\n            case 18:\n              _context.prev = 18;\n              _context.prev = 19;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 21:\n              _context.prev = 21;\n\n              if (!_didIteratorError) {\n                _context.next = 24;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 24:\n              return _context.finish(21);\n\n            case 25:\n              return _context.finish(18);\n\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, value, this, [[3, 14, 18, 26], [19,, 21, 25]]);\n    })\n  }, {\n    key: \"get\",\n    value: function get(hash) {\n      return this[_symbol.__groups__][hash];\n    }\n  }, {\n    key: \"toCollection\",\n    value: function toCollection() {\n      return _toConsumableArray(this);\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var quiet = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      return _toConsumableArray(this).map(function (_ref) {\n        var group = _ref.group,\n            groupKey = _ref.groupKey;\n        var groupLog = \"--\\n[\".concat(JSON.stringify(groupKey), \"]\\n--\");\n\n        if (!quiet) {\n          console.log(groupLog);\n        }\n\n        return groupLog + \"\\n\" + group.show(10, quiet);\n      }).reduce(function (p, n) {\n        return p + \"\\n\" + n;\n      });\n    }\n  }, {\n    key: \"listGroups\",\n    value: function listGroups() {\n      return _toConsumableArray(this).map(function (_ref2) {\n        var groupKey = _ref2.groupKey;\n        return groupKey;\n      });\n    }\n  }, {\n    key: \"listHashs\",\n    value: function listHashs() {\n      return this[_symbol.__hashes__];\n    }\n  }, {\n    key: \"map\",\n    value: function map(func) {\n      var _ref4;\n\n      var mapped = _toConsumableArray(this).map(function (_ref3) {\n        var group = _ref3.group;\n        return group.map(func);\n      });\n\n      return this.df.__newInstance__((_ref4 = []).concat.apply(_ref4, _toConsumableArray(mapped.map(function (group) {\n        return group.toCollection();\n      }))), mapped[0].listColumns());\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(condition) {\n      var _ref6;\n\n      var mapped = _toConsumableArray(this).map(function (_ref5) {\n        var group = _ref5.group;\n        return group.filter(condition);\n      }).filter(function (group) {\n        return group.listColumns().length > 0;\n      });\n\n      return mapped.length === 0 ? this.df.__newInstance__([], this.df.listColumns()) : this.df.__newInstance__((_ref6 = []).concat.apply(_ref6, _toConsumableArray(mapped.map(function (group) {\n        return group.toCollection();\n      }))), this.df.listColumns());\n    }\n  }, {\n    key: \"chain\",\n    value: function chain() {\n      var _ref8;\n\n      for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n        funcs[_key] = arguments[_key];\n      }\n\n      var mapped = _toConsumableArray(this).map(function (_ref7) {\n        var group = _ref7.group;\n        return group.chain.apply(group, funcs);\n      });\n\n      return this.df.__newInstance__((_ref8 = []).concat.apply(_ref8, _toConsumableArray(mapped.map(function (group) {\n        return group.toCollection();\n      }))), mapped[0].listColumns());\n    }\n  }, {\n    key: \"aggregate\",\n    value: function aggregate(func) {\n      var columnName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"aggregation\";\n      return this.df.__newInstance__(_toConsumableArray(this).map(function (_ref9) {\n        var group = _ref9.group,\n            groupKey = _ref9.groupKey;\n        return _objectSpread({}, groupKey, _defineProperty({}, columnName, func(group, groupKey)));\n      }), [].concat(_toConsumableArray(this.on), [columnName]));\n    }\n  }, {\n    key: \"pivot\",\n    value: function pivot(columnToPivot) {\n      var func = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (gdf) {\n        return gdf.count();\n      };\n      var columns = [].concat(_toConsumableArray(this.on), _toConsumableArray(this.df.distinct(columnToPivot).toArray(columnToPivot)));\n      return this.df.__newInstance__(this.aggregate(function (group) {\n        return group.groupBy(columnToPivot).aggregate(function (gp, gk) {\n          return _defineProperty({}, gk[columnToPivot], func(gp, gk));\n        }).toArray(\"aggregation\").reduce(function (p, n) {\n          return _objectSpread({}, p, {}, n);\n        }, {});\n      }).toCollection().map(function (_ref11) {\n        var aggregation = _ref11.aggregation,\n            rest = _objectWithoutProperties(_ref11, [\"aggregation\"]);\n\n        return _objectSpread({}, rest, {}, aggregation);\n      }), columns);\n    }\n  }, {\n    key: \"melt\",\n    value: function melt() {\n      var _this = this;\n\n      var variableColumnName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"variable\";\n      var valueColumnName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"value\";\n      var columns = [].concat(_toConsumableArray(this.on), [variableColumnName, valueColumnName]);\n      return this.df.__newInstance__(this.aggregate(function (group) {\n        return Object.entries(group.toDict()).reduce(function (tidy, _ref12) {\n          var _ref13 = _slicedToArray(_ref12, 2),\n              key = _ref13[0],\n              value = _ref13[1];\n\n          return [].concat(_toConsumableArray(tidy), _toConsumableArray(value.reduce(function (p, n) {\n            var _ref14;\n\n            return !_this.on.includes(key) ? [].concat(_toConsumableArray(p), [(_ref14 = {}, _defineProperty(_ref14, variableColumnName, key), _defineProperty(_ref14, valueColumnName, n), _ref14)]) : p;\n          }, [])));\n        }, []);\n      }).toCollection().reduce(function (p, _ref15) {\n        var aggregation = _ref15.aggregation,\n            rest = _objectWithoutProperties(_ref15, [\"aggregation\"]);\n\n        return [].concat(_toConsumableArray(p), _toConsumableArray(aggregation.map(function (x) {\n          return _objectSpread({}, rest, {}, x);\n        })));\n      }, []), columns);\n    }\n  }]);\n\n  return GroupedDataFrame;\n}();\n\nexports.GroupedDataFrame = GroupedDataFrame;\n\nfunction groupBy(df, columnNames) {\n  var rowsByGroup = {};\n  var hashes = [];\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = df.toCollection(true)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var row = _step2.value;\n      var hash = row.select.apply(row, _toConsumableArray(columnNames)).hash();\n\n      if (!rowsByGroup[hash]) {\n        hashes.push(hash);\n        rowsByGroup[hash] = [];\n      }\n\n      rowsByGroup[hash].push(row);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var groups = hashes.reduce(function (groups, hash) {\n    var _rowsByGroup$hash$;\n\n    groups[hash] = {\n      groupKey: (_rowsByGroup$hash$ = rowsByGroup[hash][0]).select.apply(_rowsByGroup$hash$, _toConsumableArray(columnNames)).toDict(),\n      hash: hash,\n      group: new df.constructor(rowsByGroup[hash], df.listColumns())\n    };\n    return groups;\n  }, {});\n  return new GroupedDataFrame(df, columnNames, groups, hashes);\n}"]},"metadata":{},"sourceType":"script"}