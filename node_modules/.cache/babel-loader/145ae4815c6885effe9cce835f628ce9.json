{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sqlEngine = _interopRequireDefault(require(\"./sqlEngine\"));\n\nvar _dataframe = _interopRequireDefault(require(\"../../dataframe\"));\n\nvar _errors = require(\"../../errors\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar SQL = function () {\n  _createClass(SQL, null, [{\n    key: \"request\",\n    value: function request(query) {\n      if (!(typeof query === \"string\")) throw new _errors.ArgumentTypeError(query, \"Stri g\");\n      return (0, _sqlEngine.default)(query, SQL.tables);\n    }\n  }, {\n    key: \"dropTables\",\n    value: function dropTables() {\n      SQL.tables = {};\n    }\n  }, {\n    key: \"dropTable\",\n    value: function dropTable(tableName) {\n      delete SQL.tables[tableName];\n    }\n  }, {\n    key: \"renameTable\",\n    value: function renameTable(tableName, replacement) {\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      SQL.registerTable(SQL.tables[tableName], replacement, overwrite);\n      SQL.dropTable(tableName);\n    }\n  }, {\n    key: \"listTables\",\n    value: function listTables() {\n      return Object.keys(SQL.tables);\n    }\n  }, {\n    key: \"registerTable\",\n    value: function registerTable(df, tableName) {\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!(df instanceof _dataframe.default)) throw new _errors.ArgumentTypeError(df, \"DataFrame\");\n      var validation = new RegExp(\"^[a-zA-Z_][a-zA-Z0-9_]*$\");\n\n      if (!validation.test(tableName)) {\n        throw new _errors.WrongTableNameError(tableName);\n      }\n\n      if (SQL.listTables().includes(tableName) && !overwrite) {\n        throw new _errors.TableAlreadyExistsError(tableName);\n      }\n\n      SQL.tables[tableName] = df;\n    }\n  }]);\n\n  function SQL(df) {\n    _classCallCheck(this, SQL);\n\n    this.df = df;\n    this.name = \"sql\";\n  }\n\n  _createClass(SQL, [{\n    key: \"register\",\n    value: function register(tableName) {\n      var overwrite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      SQL.registerTable(this.df, tableName, overwrite);\n      return this.df;\n    }\n  }]);\n\n  return SQL;\n}();\n\nSQL.tables = {};\nvar _default = SQL;\nexports.default = _default;","map":{"version":3,"sources":["/Users/gabe/mggg/estimate-incoming/node_modules/dataframe-js/lib/modules/sql/index.js"],"names":["Object","defineProperty","exports","value","default","_sqlEngine","_interopRequireDefault","require","_dataframe","_errors","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","SQL","request","query","ArgumentTypeError","tables","dropTables","dropTable","tableName","renameTable","replacement","overwrite","arguments","undefined","registerTable","listTables","keys","df","validation","RegExp","test","WrongTableNameError","includes","TableAlreadyExistsError","name","register","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es.array.includes\");\n\nrequire(\"core-js/modules/es.function.name\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/es.regexp.constructor\");\n\nrequire(\"core-js/modules/es.regexp.exec\");\n\nrequire(\"core-js/modules/es.regexp.to-string\");\n\nrequire(\"core-js/modules/es.string.includes\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sqlEngine = _interopRequireDefault(require(\"./sqlEngine\"));\n\nvar _dataframe = _interopRequireDefault(require(\"../../dataframe\"));\n\nvar _errors = require(\"../../errors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SQL = function () {\n  _createClass(SQL, null, [{\n    key: \"request\",\n    value: function request(query) {\n      if (!(typeof query === \"string\")) throw new _errors.ArgumentTypeError(query, \"Stri g\");\n      return (0, _sqlEngine.default)(query, SQL.tables);\n    }\n  }, {\n    key: \"dropTables\",\n    value: function dropTables() {\n      SQL.tables = {};\n    }\n  }, {\n    key: \"dropTable\",\n    value: function dropTable(tableName) {\n      delete SQL.tables[tableName];\n    }\n  }, {\n    key: \"renameTable\",\n    value: function renameTable(tableName, replacement) {\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      SQL.registerTable(SQL.tables[tableName], replacement, overwrite);\n      SQL.dropTable(tableName);\n    }\n  }, {\n    key: \"listTables\",\n    value: function listTables() {\n      return Object.keys(SQL.tables);\n    }\n  }, {\n    key: \"registerTable\",\n    value: function registerTable(df, tableName) {\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!(df instanceof _dataframe.default)) throw new _errors.ArgumentTypeError(df, \"DataFrame\");\n      var validation = new RegExp(\"^[a-zA-Z_][a-zA-Z0-9_]*$\");\n\n      if (!validation.test(tableName)) {\n        throw new _errors.WrongTableNameError(tableName);\n      }\n\n      if (SQL.listTables().includes(tableName) && !overwrite) {\n        throw new _errors.TableAlreadyExistsError(tableName);\n      }\n\n      SQL.tables[tableName] = df;\n    }\n  }]);\n\n  function SQL(df) {\n    _classCallCheck(this, SQL);\n\n    this.df = df;\n    this.name = \"sql\";\n  }\n\n  _createClass(SQL, [{\n    key: \"register\",\n    value: function register(tableName) {\n      var overwrite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      SQL.registerTable(this.df, tableName, overwrite);\n      return this.df;\n    }\n  }]);\n\n  return SQL;\n}();\n\nSQL.tables = {};\nvar _default = SQL;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}