{"ast":null,"code":"import _classCallCheck from\"/Users/gabe/mggg/estimate-incoming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gabe/mggg/estimate-incoming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/gabe/mggg/estimate-incoming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/gabe/mggg/estimate-incoming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gabe/mggg/estimate-incoming/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';var d3=require(\"d3\");var FileInput=/*#__PURE__*/function(_React$Component){_inherits(FileInput,_React$Component);var _super=_createSuper(FileInput);function FileInput(props){var _this;_classCallCheck(this,FileInput);_this=_super.call(this,props);document.body.ondragover=function(ev){ev.preventDefault();ev.stopPropagation();};document.body.ondrop=_this.handleDrop.bind(_assertThisInitialized(_this));return _this;}_createClass(FileInput,[{key:\"handleDrop\",value:function handleDrop(ev){ev.preventDefault();ev.stopPropagation();this.props.startLoading();if(ev.dataTransfer.items&&ev.dataTransfer.items.length){this.parseFile(ev.dataTransfer.items[0].getAsFile());}else if(ev.dataTransfer.files&&ev.dataTransfer.files.length){this.parseFile(ev.dataTransfer.files[0].getAsFile());}}},{key:\"handleUpload\",value:function handleUpload(e){this.props.startLoading();this.parseFile(e.target.files[0]);}},{key:\"parseFile\",value:function parseFile(file){var _this2=this;var reader=new FileReader();reader.onload=function(e){var tblob=e.target.result,rows=d3.csvParseRows(tblob);// trim header\nif(rows[0][0].toLowerCase().trim()===\"state\"){rows.splice(0,1);}_this2.props.onChange(rows);};reader.readAsText(file);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:this.handleUpload.bind(this)}));}}]);return FileInput;}(React.Component);export{FileInput as default};","map":{"version":3,"sources":["/Users/gabe/mggg/estimate-incoming/src/fileinput.js"],"names":["React","d3","require","FileInput","props","document","body","ondragover","ev","preventDefault","stopPropagation","ondrop","handleDrop","bind","startLoading","dataTransfer","items","length","parseFile","getAsFile","files","e","target","file","reader","FileReader","onload","tblob","result","rows","csvParseRows","toLowerCase","trim","splice","onChange","readAsText","handleUpload","Component"],"mappings":"6vBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,EAAE,CAAGC,OAAO,CAAC,IAAD,CAAlB,C,GAEqBC,CAAAA,S,kHACnB,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EAEAC,QAAQ,CAACC,IAAT,CAAcC,UAAd,CAA2B,SAACC,EAAD,CAAQ,CAC/BA,EAAE,CAACC,cAAH,GACAD,EAAE,CAACE,eAAH,GACH,CAHD,CAIAL,QAAQ,CAACC,IAAT,CAAcK,MAAd,CAAuB,MAAKC,UAAL,CAAgBC,IAAhB,+BAAvB,CAPiB,aAQlB,C,oEAEUL,E,CAAI,CACbA,EAAE,CAACC,cAAH,GACAD,EAAE,CAACE,eAAH,GACA,KAAKN,KAAL,CAAWU,YAAX,GAEA,GAAIN,EAAE,CAACO,YAAH,CAAgBC,KAAhB,EAAyBR,EAAE,CAACO,YAAH,CAAgBC,KAAhB,CAAsBC,MAAnD,CAA2D,CACzD,KAAKC,SAAL,CAAeV,EAAE,CAACO,YAAH,CAAgBC,KAAhB,CAAsB,CAAtB,EAAyBG,SAAzB,EAAf,EACD,CAFD,IAEO,IAAIX,EAAE,CAACO,YAAH,CAAgBK,KAAhB,EAAyBZ,EAAE,CAACO,YAAH,CAAgBK,KAAhB,CAAsBH,MAAnD,CAA2D,CAChE,KAAKC,SAAL,CAAeV,EAAE,CAACO,YAAH,CAAgBK,KAAhB,CAAsB,CAAtB,EAAyBD,SAAzB,EAAf,EACD,CACF,C,kDAEYE,C,CAAG,CACd,KAAKjB,KAAL,CAAWU,YAAX,GACA,KAAKI,SAAL,CAAeG,CAAC,CAACC,MAAF,CAASF,KAAT,CAAe,CAAf,CAAf,EACD,C,4CAESG,I,CAAM,iBACd,GAAIC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CACAD,MAAM,CAACE,MAAP,CAAgB,SAACL,CAAD,CAAO,CACnB,GAAIM,CAAAA,KAAK,CAAGN,CAAC,CAACC,MAAF,CAASM,MAArB,CACIC,IAAI,CAAG5B,EAAE,CAAC6B,YAAH,CAAgBH,KAAhB,CADX,CAEA;AACA,GAAIE,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,EAAWE,WAAX,GAAyBC,IAAzB,KAAoC,OAAxC,CAAiD,CAC/CH,IAAI,CAACI,MAAL,CAAY,CAAZ,CAAe,CAAf,EACD,CACD,MAAI,CAAC7B,KAAL,CAAW8B,QAAX,CAAoBL,IAApB,EACH,CARD,CASAL,MAAM,CAACW,UAAP,CAAkBZ,IAAlB,EACD,C,uCAEQ,CACP,mBAAO,4CACL,6BACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,KAAKa,YAAL,CAAkBvB,IAAlB,CAAuB,IAAvB,CAFZ,EADK,CAAP,CAMD,C,uBAjDoCb,KAAK,CAACqC,S,SAAxBlC,S","sourcesContent":["import React from 'react';\n\nconst d3 = require(\"d3\");\n\nexport default class FileInput extends React.Component {\n  constructor(props) {\n    super(props)\n\n    document.body.ondragover = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n    };\n    document.body.ondrop = this.handleDrop.bind(this);\n  }\n\n  handleDrop(ev) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this.props.startLoading();\n\n    if (ev.dataTransfer.items && ev.dataTransfer.items.length) {\n      this.parseFile(ev.dataTransfer.items[0].getAsFile());\n    } else if (ev.dataTransfer.files && ev.dataTransfer.files.length) {\n      this.parseFile(ev.dataTransfer.files[0].getAsFile());\n    }\n  }\n\n  handleUpload(e) {\n    this.props.startLoading();\n    this.parseFile(e.target.files[0]);\n  }\n\n  parseFile(file) {\n    let reader = new FileReader();\n    reader.onload = (e) => {\n        let tblob = e.target.result,\n            rows = d3.csvParseRows(tblob);\n        // trim header\n        if (rows[0][0].toLowerCase().trim() === \"state\") {\n          rows.splice(0, 1);\n        }\n        this.props.onChange(rows);\n    };\n    reader.readAsText(file);\n  }\n\n  render() {\n    return <div>\n      <input\n        type=\"file\"\n        onChange={this.handleUpload.bind(this)}\n      />\n    </div>\n  }\n}\n"]},"metadata":{},"sourceType":"module"}